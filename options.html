<!DOCTYPE html>
<html>
<head>
  <title>BrockU Subreddit for Google Chrome Options</title>
  <script type="text/javascript" src="core.js"></script>
  <script type="text/javascript">
    var selectReqInterval;
    var radioNotifications;
    var radioBackgroundTabs;
   
    function initVariables()
    {
      selectReqInterval = document.getElementById("RequestInterval");
      radioNotifications = document.getElementsByName("Notifications");
      radioBackgroundTabs = document.getElementsByName("BackgroundTabs");	
    }

    // Retrieves stored user values for all the options.
    function restoreOptions()
    {
      initVariables();
      var reqInterval = localStorage["requestInterval"];
      for (var i=0; i<selectReqInterval.children.length; i++)
      {
        if (selectReqInterval[i].value == reqInterval)
        {
          selectReqInterval[i].selected = "true";
          break;
        }
      }
      var notifications = localStorage["notifications"];
      for (var i=0; i<radioNotifications.length; i++)
      {
        if (radioNotifications[i].value == notifications)
        {
          radioNotifications[i].checked = "true";
        }
      }
      var backgroundTabs = localStorage["backgroundTabs"];
      for (var i=0; i<radioBackgroundTabs.length; i++)
      {
        if (radioBackgroundTabs[i].value == backgroundTabs)
        {
          radioBackgroundTabs[i].checked = "true";
        }
      }
    }

    // Saves all the options to local storage. Called on change for all options.
    function saveOptions()
    {
      var interval = selectReqInterval.children[selectReqInterval.selectedIndex].value;
      localStorage["requestInterval"] = interval;
      
      // Saves the first checked (notification) radio button it comes across.
      for (var i=0; i<radioNotifications.length; i++)
      {
        if (radioNotifications[i].checked == true)
        {
          localStorage["notifications"] = radioNotifications[i].value;
          break;
        }
      }

      for (var i=0; i<radioBackgroundTabs.length; i++)
      {
        if (radioBackgroundTabs[i].checked == true)
        {
          localStorage["backgroundTabs"] = radioBackgroundTabs[i].value;
          break;
        }
      }
    }
  </script>
  <link href="style.css" rel="stylesheet" type="text/css"/>
  <style>
    #header { margin-bottom: 20px; }
    #container { width: 85%; margin: auto; }
    label { margin-right: 10px; }
    .second-radio { margin-left: 10px; }
    p { color: #828282; }
    a { text-decoration: underline; }
    #feed { margin-left: 10px; }
    #logo { margin: 4px 0px 0px 0px !important; }
  </style>
</head>
<body onLoad="restoreOptions()">
  <div id="container">
    <div id="header">
      <img id="logo" src="reddit.png" />
      <span id="title">Options</span>
    </div>
    <div id="feed">
      <label for="RequestInterval">Update stories every:</label>
      <select id="RequestInterval" name="RequestInterval" onChange="saveOptions()">
        <option	value="900000">15 minutes</option>
        <option value="1800000">30 minutes</option>
        <option value="3600000">1 hour</option>
        <option value="7200000">2 hours</option>
      </select><br/><br/><br/>
      <label for="Notifications">Display a notification when /r/brocku receives a new submission?</label><br/>
      <input type="radio" name="Notifications" value="true" onChange="saveOptions()"> Yes
      <input type="radio" class="second-radio" name="Notifications" value="false" onChange="saveOptions()"> No<br/>
      <br/><br/>
      <label for="BackgroundTabs">Open story links in background tabs?</label><br/>
      <input type="radio" name="BackgroundTabs" value="true" onChange="saveOptions()"> Yes
      <input type="radio" class="second-radio" name="BackgroundTabs" value="false" onChange="saveOptions()"> No<br/>
      <br/><br/>
      <p>:: Created by <b>Dennis Ideler</b> :: <a href='http://dennisideler.com' target='_blank'>www.dennisideler.com</a><p>
      <p class='right'>
        <a href='https://github.com/dideler/brocku-reddit-for-chrome/issues' target='_blank'>Report an Issue</a>
      </p>
      <p>:: Fork of <a href='https://github.com/adamalbrecht/hacker-news-for-chrome' target='_blank'>Hacker News for Chrome</a> by <b>Adam Albrecht</b> :: <a href='http://adamalbrecht.com' target='_blank'>www.adamalbrecht.com</a></p>
    </div>
  </div>
</body>
</html>
